{"id":"node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","dependencies":[{"name":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js.map","includedInParent":true,"mtime":1652099631555},{"name":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/src/dependencies.ts","includedInParent":true,"mtime":1652099631798},{"name":"/Users/tdrave/demo-solid-app/package.json","includedInParent":true,"mtime":1652099771977},{"name":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/package.json","includedInParent":true,"mtime":1652099631546},{"name":"@inrupt/solid-client-authn-core","loc":{"line":7,"column":42,"index":316},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-core/dist/index.js"},{"name":"./storage/StorageUtility","loc":{"line":8,"column":49,"index":401},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/storage/StorageUtility.js"},{"name":"./ClientAuthentication","loc":{"line":9,"column":55,"index":486},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/ClientAuthentication.js"},{"name":"./login/oidc/OidcLoginHandler","loc":{"line":10,"column":51,"index":565},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/OidcLoginHandler.js"},{"name":"./login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler","loc":{"line":11,"column":71,"index":671},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler.js"},{"name":"./login/oidc/IssuerConfigFetcher","loc":{"line":12,"column":54,"index":793},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/IssuerConfigFetcher.js"},{"name":"./login/oidc/redirectHandler/FallbackRedirectHandler","loc":{"line":13,"column":42,"index":873},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/redirectHandler/FallbackRedirectHandler.js"},{"name":"./logout/GeneralLogoutHandler","loc":{"line":14,"column":55,"index":985},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/logout/GeneralLogoutHandler.js"},{"name":"./sessionInfo/SessionInfoManager","loc":{"line":15,"column":37,"index":1057},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/sessionInfo/SessionInfoManager.js"},{"name":"./login/oidc/redirectHandler/AuthCodeRedirectHandler","loc":{"line":16,"column":42,"index":1136},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/redirectHandler/AuthCodeRedirectHandler.js"},{"name":"./login/oidc/redirectHandler/AggregateRedirectHandler","loc":{"line":17,"column":59,"index":1252},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/redirectHandler/AggregateRedirectHandler.js"},{"name":"./storage/BrowserStorage","loc":{"line":18,"column":49,"index":1360},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/storage/BrowserStorage.js"},{"name":"./login/oidc/Redirector","loc":{"line":19,"column":45,"index":1435},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/Redirector.js"},{"name":"./login/oidc/ClientRegistrar","loc":{"line":20,"column":50,"index":1514},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/ClientRegistrar.js"},{"name":"./login/oidc/redirectHandler/ErrorOidcHandler","loc":{"line":21,"column":35,"index":1583},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/redirectHandler/ErrorOidcHandler.js"},{"name":"./login/oidc/refresh/TokenRefresher","loc":{"line":22,"column":49,"index":1682},"parent":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/dependencies.js","resolved":"/Users/tdrave/demo-solid-app/node_modules/@inrupt/solid-client-authn-browser/dist/login/oidc/refresh/TokenRefresher.js"}],"generated":{"js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getClientAuthenticationWithDependencies = void 0;\nconst solid_client_authn_core_1 = require(\"@inrupt/solid-client-authn-core\");\nconst StorageUtility_1 = __importDefault(require(\"./storage/StorageUtility\"));\nconst ClientAuthentication_1 = __importDefault(require(\"./ClientAuthentication\"));\nconst OidcLoginHandler_1 = __importDefault(require(\"./login/oidc/OidcLoginHandler\"));\nconst AuthorizationCodeWithPkceOidcHandler_1 = __importDefault(require(\"./login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler\"));\nconst IssuerConfigFetcher_1 = __importDefault(require(\"./login/oidc/IssuerConfigFetcher\"));\nconst FallbackRedirectHandler_1 = require(\"./login/oidc/redirectHandler/FallbackRedirectHandler\");\nconst GeneralLogoutHandler_1 = __importDefault(require(\"./logout/GeneralLogoutHandler\"));\nconst SessionInfoManager_1 = require(\"./sessionInfo/SessionInfoManager\");\nconst AuthCodeRedirectHandler_1 = require(\"./login/oidc/redirectHandler/AuthCodeRedirectHandler\");\nconst AggregateRedirectHandler_1 = __importDefault(require(\"./login/oidc/redirectHandler/AggregateRedirectHandler\"));\nconst BrowserStorage_1 = __importDefault(require(\"./storage/BrowserStorage\"));\nconst Redirector_1 = __importDefault(require(\"./login/oidc/Redirector\"));\nconst ClientRegistrar_1 = __importDefault(require(\"./login/oidc/ClientRegistrar\"));\nconst ErrorOidcHandler_1 = require(\"./login/oidc/redirectHandler/ErrorOidcHandler\");\nconst TokenRefresher_1 = __importDefault(require(\"./login/oidc/refresh/TokenRefresher\"));\nfunction getClientAuthenticationWithDependencies(dependencies) {\n    const inMemoryStorage = new solid_client_authn_core_1.InMemoryStorage();\n    const secureStorage = dependencies.secureStorage || inMemoryStorage;\n    const insecureStorage = dependencies.insecureStorage || new BrowserStorage_1.default();\n    const storageUtility = new StorageUtility_1.default(secureStorage, insecureStorage);\n    const issuerConfigFetcher = new IssuerConfigFetcher_1.default(storageUtility);\n    const clientRegistrar = new ClientRegistrar_1.default(storageUtility);\n    const sessionInfoManager = new SessionInfoManager_1.SessionInfoManager(storageUtility);\n    const tokenRefresher = new TokenRefresher_1.default(storageUtility, issuerConfigFetcher, clientRegistrar);\n    const loginHandler = new OidcLoginHandler_1.default(storageUtility, new AuthorizationCodeWithPkceOidcHandler_1.default(storageUtility, new Redirector_1.default()), issuerConfigFetcher, clientRegistrar);\n    const redirectHandler = new AggregateRedirectHandler_1.default([\n        new ErrorOidcHandler_1.ErrorOidcHandler(),\n        new AuthCodeRedirectHandler_1.AuthCodeRedirectHandler(storageUtility, sessionInfoManager, issuerConfigFetcher, clientRegistrar, tokenRefresher),\n        new FallbackRedirectHandler_1.FallbackRedirectHandler(),\n    ]);\n    return new ClientAuthentication_1.default(loginHandler, redirectHandler, new GeneralLogoutHandler_1.default(sessionInfoManager), sessionInfoManager, issuerConfigFetcher);\n}\nexports.getClientAuthenticationWithDependencies = getClientAuthenticationWithDependencies;\n"},"sourceMaps":{"js":{"version":3,"file":"dependencies.js","sourceRoot":"","sources":["../src/dependencies.ts"],"names":[],"mappings":";;;;;;AA6BA,6EAA4E;AAC5E,8EAA6D;AAC7D,kFAA0D;AAC1D,qFAA6D;AAC7D,0IAAkH;AAClH,2FAAmE;AACnE,kGAA+F;AAC/F,yFAAiE;AACjE,yEAAsE;AACtE,kGAA+F;AAC/F,qHAA6F;AAC7F,8EAAsD;AACtD,yEAAiD;AACjD,mFAA2D;AAC3D,oFAAiF;AACjF,yFAAiE;AAOjE,SAAgB,uCAAuC,CAAC,YAGvD;IACC,MAAM,eAAe,GAAG,IAAI,yCAAe,EAAE,CAAC;IAC9C,MAAM,aAAa,GAAG,YAAY,CAAC,aAAa,IAAI,eAAe,CAAC;IACpE,MAAM,eAAe,GAAG,YAAY,CAAC,eAAe,IAAI,IAAI,wBAAc,EAAE,CAAC;IAE7E,MAAM,cAAc,GAAG,IAAI,wBAAqB,CAC9C,aAAa,EACb,eAAe,CAChB,CAAC;IAEF,MAAM,mBAAmB,GAAG,IAAI,6BAAmB,CAAC,cAAc,CAAC,CAAC;IACpE,MAAM,eAAe,GAAG,IAAI,yBAAe,CAAC,cAAc,CAAC,CAAC;IAE5D,MAAM,kBAAkB,GAAG,IAAI,uCAAkB,CAAC,cAAc,CAAC,CAAC;IAElE,MAAM,cAAc,GAAG,IAAI,wBAAc,CACvC,cAAc,EACd,mBAAmB,EACnB,eAAe,CAChB,CAAC;IAGF,MAAM,YAAY,GAAG,IAAI,0BAAgB,CACvC,cAAc,EACd,IAAI,8CAAoC,CAAC,cAAc,EAAE,IAAI,oBAAU,EAAE,CAAC,EAC1E,mBAAmB,EACnB,eAAe,CAChB,CAAC;IAEF,MAAM,eAAe,GAAG,IAAI,kCAAwB,CAAC;QACnD,IAAI,mCAAgB,EAAE;QACtB,IAAI,iDAAuB,CACzB,cAAc,EACd,kBAAkB,EAClB,mBAAmB,EACnB,eAAe,EACf,cAAc,CACf;QAGD,IAAI,iDAAuB,EAAE;KAC9B,CAAC,CAAC;IAEH,OAAO,IAAI,8BAAoB,CAC7B,YAAY,EACZ,eAAe,EACf,IAAI,8BAAoB,CAAC,kBAAkB,CAAC,EAC5C,kBAAkB,EAClB,mBAAmB,CACpB,CAAC;AACJ,CAAC;AArDD,0FAqDC","sourcesContent":["/*\n * Copyright 2022 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * @hidden\n * @packageDocumentation\n */\n\n/**\n * Top Level core document. Responsible for setting up the dependency graph\n */\nimport { IStorage, InMemoryStorage } from \"@inrupt/solid-client-authn-core\";\nimport StorageUtilityBrowser from \"./storage/StorageUtility\";\nimport ClientAuthentication from \"./ClientAuthentication\";\nimport OidcLoginHandler from \"./login/oidc/OidcLoginHandler\";\nimport AuthorizationCodeWithPkceOidcHandler from \"./login/oidc/oidcHandlers/AuthorizationCodeWithPkceOidcHandler\";\nimport IssuerConfigFetcher from \"./login/oidc/IssuerConfigFetcher\";\nimport { FallbackRedirectHandler } from \"./login/oidc/redirectHandler/FallbackRedirectHandler\";\nimport GeneralLogoutHandler from \"./logout/GeneralLogoutHandler\";\nimport { SessionInfoManager } from \"./sessionInfo/SessionInfoManager\";\nimport { AuthCodeRedirectHandler } from \"./login/oidc/redirectHandler/AuthCodeRedirectHandler\";\nimport AggregateRedirectHandler from \"./login/oidc/redirectHandler/AggregateRedirectHandler\";\nimport BrowserStorage from \"./storage/BrowserStorage\";\nimport Redirector from \"./login/oidc/Redirector\";\nimport ClientRegistrar from \"./login/oidc/ClientRegistrar\";\nimport { ErrorOidcHandler } from \"./login/oidc/redirectHandler/ErrorOidcHandler\";\nimport TokenRefresher from \"./login/oidc/refresh/TokenRefresher\";\n\n/**\n *\n * @param dependencies\n * @deprecated This function will be removed from the external API in an upcoming release.\n */\nexport function getClientAuthenticationWithDependencies(dependencies: {\n  secureStorage?: IStorage;\n  insecureStorage?: IStorage;\n}): ClientAuthentication {\n  const inMemoryStorage = new InMemoryStorage();\n  const secureStorage = dependencies.secureStorage || inMemoryStorage;\n  const insecureStorage = dependencies.insecureStorage || new BrowserStorage();\n\n  const storageUtility = new StorageUtilityBrowser(\n    secureStorage,\n    insecureStorage\n  );\n\n  const issuerConfigFetcher = new IssuerConfigFetcher(storageUtility);\n  const clientRegistrar = new ClientRegistrar(storageUtility);\n\n  const sessionInfoManager = new SessionInfoManager(storageUtility);\n\n  const tokenRefresher = new TokenRefresher(\n    storageUtility,\n    issuerConfigFetcher,\n    clientRegistrar\n  );\n\n  // make new handler for redirect and login\n  const loginHandler = new OidcLoginHandler(\n    storageUtility,\n    new AuthorizationCodeWithPkceOidcHandler(storageUtility, new Redirector()),\n    issuerConfigFetcher,\n    clientRegistrar\n  );\n\n  const redirectHandler = new AggregateRedirectHandler([\n    new ErrorOidcHandler(),\n    new AuthCodeRedirectHandler(\n      storageUtility,\n      sessionInfoManager,\n      issuerConfigFetcher,\n      clientRegistrar,\n      tokenRefresher\n    ),\n    // This catch-all class will always be able to handle the\n    // redirect IRI, so it must be registered last.\n    new FallbackRedirectHandler(),\n  ]);\n\n  return new ClientAuthentication(\n    loginHandler,\n    redirectHandler,\n    new GeneralLogoutHandler(sessionInfoManager),\n    sessionInfoManager,\n    issuerConfigFetcher\n  );\n}\n"]}},"error":null,"hash":"8bc0f919962f59bdb982f3f40f082ba2","cacheData":{"env":{}}}